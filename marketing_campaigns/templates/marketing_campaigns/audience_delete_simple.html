{% extends 'base.html' %}

{% block title %}Delete Audience{% endblock %}

{% block content %}
<div style="margin-bottom: 20px;">
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <div>
            <h2>Delete Audience</h2>
            <p style="color: #666; margin: 5px 0;">Confirm deletion of audience</p>
        </div>
        <a href="{% url 'marketing_campaigns:audience_view' request.resolver_match.kwargs.tenant_id audience.pk %}" 
           style="background: #6c757d; color: white; padding: 8px 15px; text-decoration: none; border-radius: 3px;">
            ← Back to Audience
        </a>
    </div>
</div>

<div style="background: white; padding: 25px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); max-width: 600px;">
    <!-- Warning Alert -->
    <div style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px; margin-bottom: 20px; border-left: 4px solid #dc3545;">
        <h4 style="margin: 0 0 10px 0;">⚠️ Warning</h4>
        <p style="margin: 0;">This action cannot be undone. All audience data and member information will be permanently deleted.</p>
    </div>
    
    <!-- Audience Info -->
    <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
        <h4 style="margin: 0 0 10px 0; color: #333;">Audience to Delete:</h4>
        <div style="display: grid; grid-template-columns: auto 1fr; gap: 10px; font-size: 14px;">
            <strong>Name:</strong>
            <span>{{ audience.name }}</span>
            
            {% if audience.description %}
                <strong>Description:</strong>
                <span>{{ audience.description }}</span>
            {% endif %}
            
            <strong>Members:</strong>
            <span>{{ audience.total_numbers }} total ({{ audience.valid_numbers }} valid)</span>
            
            <strong>Created:</strong>
            <span>{{ audience.created_at|date:"F j, Y g:i A" }}</span>
            
            <strong>Created By:</strong>
            <span>{{ audience.created_by }}</span>
            
            <strong>Upload Method:</strong>
            <span>{{ audience.get_upload_method_display }}</span>
        </div>
    </div>
    
    <!-- Confirmation Form -->
    <form method="post">
        {% csrf_token %}
        
        <div style="margin-bottom: 20px;">
            <p style="margin: 0; color: #333; font-weight: 500;">
                Are you sure you want to delete the audience "<strong>{{ audience.name }}</strong>"?
            </p>
        </div>
        
        <div style="display: flex; gap: 10px;">
            <button type="submit" 
                    style="background: #dc3545; color: white; padding: 12px 25px; border: none; border-radius: 3px; cursor: pointer; font-size: 14px;">
                Yes, Delete Audience
            </button>
            <a href="{% url 'marketing_campaigns:audience_view' request.resolver_match.kwargs.tenant_id audience.pk %}" 
               style="background: #6c757d; color: white; padding: 12px 20px; text-decoration: none; border-radius: 3px; font-size: 14px;">
                Cancel
            </a>
        </div>
    </form>
</div>

<!-- Impact Information -->
<div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 20px; border-left: 4px solid #ffc107; max-width: 600px;">
    <h4 style="margin: 0 0 10px 0; color: #856404;">What will be deleted:</h4>
    <ul style="margin: 0; color: #856404; font-size: 14px;">
        <li>Audience record and metadata</li>
        <li>All {{ audience.total_numbers }} member records</li>
        <li>Upload history and processing logs</li>
        <li>Any associated custom field data</li>
    </ul>
    
    {% if audience.processing_errors %}
        <p style="margin: 10px 0 0 0; color: #856404; font-size: 14px;">
            <strong>Note:</strong> {{ audience.processing_errors|length }} processing errors will also be removed.
        </p>
    {% endif %}
</div>
{% endblock %}