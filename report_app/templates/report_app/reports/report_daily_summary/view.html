{% extends "base.html" %}

{% block title %}Daily Summary Report{% endblock %}

{% block content %}

<div class="report-block">
  <!-- Debug: Check available context variables
  <p>Debug - displayed_report: {{ displayed_report|default:'not set' }}</p>
  <p>Debug - start_date: {{ start_date|default:'not set' }}</p>
  <p>Debug - end_date: {{ end_date|default:'not set' }}</p>
  <p>Debug - start_date_default: {{ start_date_default|default:'not set' }}</p>
  <p>Debug - end_date_default: {{ end_date_default|default:'not set' }}</p>
  <p>Debug - displayed_report.start_date_default: {{ displayed_report.start_date_default|default:'not set' }}</p>
  <p>Debug - displayed_report.end_date_default: {{ displayed_report.end_date_default|default:'not set' }}</p>
  -->


  <form method="get" action="">
    <!-- Hidden input to preserve the report parameter -->
    <input type="hidden" name="report" value="Daily Summary">
    <label for="start_date">Start Date:</label>
    <input type="date" id="start_date" name="start_date" value="{{ start_date|default:start_date_default|date:'Y-m-d' }}" required>
    <label for="end_date">End Date:</label>
    <input type="date" id="end_date" name="end_date" value="{{ end_date|default:end_date_default|date:'Y-m-d' }}" required>
    <button type="submit">Apply Filters</button>
  </form>
  <h4>Transaction Summary Report</h4>
  <table border="1">
    <thead>
      <tr>
        <th>Date</th>
        <th>Day</th>
        <th colspan="3">Total Form Depo</th>
        <th colspan="3">Total Coin Depo</th>
        <th colspan="3">Total Form WD</th>
        <th colspan="3">Total Coin WD</th>
        <th>Other Index</th>
      </tr>
      <tr>
        <th></th>
        <th></th>
        <th>Trx</th>
        <th>Manual</th>
        <th>Total</th>
        <th>Depo</th>
        <th>Manual</th>
        <th>Total Depo</th>
        <th>Trx</th>
        <th>Manual</th>
        <th>Total</th>
        <th>WD</th>
        <th>Manual</th>
        <th>Total WD</th>
        <th>No of Player</th>
      </tr>
    </thead>
    <tbody>
      {% for data in members %}
      <tr>
        <td>{{ data.date }}</td>
        <td>{{ data.day }}</td>
        <td>{{ data.depo_trx }}</td>
        <td>{{ data.manual_trx }}</td>
        <td>{{ data.total_trx }}</td>
        <td>{{ data.depo_value|floatformat:2 }}</td>
        <td>{{ data.manual_value|floatformat:2 }}</td>
        <td>{{ data.total_value|floatformat:2 }}</td>
        <td>{{ data.wd_trx }}</td>
        <td>{{ data.manual_wd_trx }}</td>
        <td>{{ data.total_wd }}</td>
        <td>{{ data.wd_value|floatformat:2 }}</td>
        <td>{{ data.manual_wd_value|floatformat:2 }}</td>
        <td>{{ data.total_wd_value|floatformat:2 }}</td>
        <td>{{ data.active_players }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}