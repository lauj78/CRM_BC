{% extends "base.html" %}

{% block title %}Error Logs{% endblock %}

{% block content %}
    <h1>Error Logs</h1>
    <table border="1">
        <tr>
            <th>File Name</th>
            <th>Upload Time</th>
            <th>File Type</th>
            <th>Errors</th>
            <th>Successes</th>
            <th>Actions</th>
        </tr>
        {% for log in logs %}
        <tr>
            <td>{{ log.file_name }}</td>
            <td>{{ log.upload_time }}</td>
            <td>{{ log.file_type|title }}</td>
            <td>{{ log.error_count }}</td>
            <td>{{ log.success_count }}</td>
            <td>
                <a href="{% url 'data_management:download_log' log.id %}">Download</a>
                <form method="post" action="{% url 'data_management:delete_log' log.id %}" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" onclick="return confirm('Are you sure you want to delete {{ log.file_name }}?')">Delete</button>
                </form>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6">No error logs found.</td>
        </tr>
        {% endfor %}
    </table>
    <p><a href="{% url 'data_management:upload_file' %}">Back to Upload</a></p>
{% endblock %}